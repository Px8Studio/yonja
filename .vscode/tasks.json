{
    "version": "2.0.0",
    "tasks": [
        // ================================================
        // üê≥ Docker Stack Management
        // ================================================
        {
            "label": "üê≥ Docker: Start All Services",
            "detail": "Start Ollama, Redis, and API containers",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "up", "-d"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üê≥ Docker: Stop All Services",
            "detail": "Stop and remove all containers",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "down"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üê≥ Docker: Start (Ollama + Redis only)",
            "detail": "Start just Ollama and Redis (for local Python dev)",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "up", "-d", "ollama", "redis"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üê≥ Docker: View Logs",
            "detail": "Follow logs from all containers",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "logs", "-f"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "isBackground": true,
            "presentation": { "reveal": "always", "panel": "dedicated" }
        },
        {
            "label": "üê≥ Docker: Container Status",
            "detail": "Show running containers and health",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "ps"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        // ================================================
        // üìä Langfuse (Self-Hosted Observability)
        // ================================================
        {
            "label": "üìä Langfuse: Start",
            "detail": "Start Langfuse server and database",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "up", "-d", "langfuse-server", "langfuse-db"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üìä Langfuse: Open Dashboard",
            "detail": "Open Langfuse UI at http://localhost:3001",
            "type": "shell",
            "command": "Start-Process",
            "args": ["http://localhost:3001"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "silent", "panel": "shared" }
        },
        {
            "label": "üìä Langfuse: View Logs",
            "detail": "Follow Langfuse container logs",
            "type": "shell",
            "command": "docker",
            "args": ["logs", "-f", "yonca-langfuse"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "isBackground": true,
            "presentation": { "reveal": "always", "panel": "dedicated" }
        },
        {
            "label": "üìä Langfuse: Stop",
            "detail": "Stop Langfuse server and database",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "stop", "langfuse-server", "langfuse-db"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        // ================================================
        // ü§ñ LLM Model Management
        // ================================================
        {
            "label": "ü§ñ Models: First-Time Setup",
            "detail": "Pull qwen3:4b and import ATLLaMA (run once)",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "--profile", "setup", "up", "model-setup"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "dedicated" },
            "dependsOn": ["üê≥ Docker: Start (Ollama + Redis only)"]
        },
        {
            "label": "ü§ñ Models: List Available",
            "detail": "Show models in Ollama",
            "type": "shell",
            "command": "docker",
            "args": ["exec", "yonca-ollama", "ollama", "list"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "ü§ñ Models: Test qwen3:4b",
            "detail": "Interactive chat with Qwen3",
            "type": "shell",
            "command": "docker",
            "args": ["exec", "-it", "yonca-ollama", "ollama", "run", "qwen3:4b"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "dedicated", "focus": true }
        },
        {
            "label": "ü§ñ Models: Test atllama",
            "detail": "Interactive chat with ATLLaMA (Azerbaijani)",
            "type": "shell",
            "command": "docker",
            "args": ["exec", "-it", "yonca-ollama", "ollama", "run", "atllama"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "dedicated", "focus": true }
        },
        // ================================================
        // üåø Local Python Development
        // ================================================
        {
            "label": "üåø Yonca API: Start Development Server",
            "detail": "Run API locally with hot reload",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
            "args": [
                "-m", "uvicorn",
                "yonca.api.main:app",
                "--host", "localhost",
                "--port", "8000",
                "--reload"
            ],
            "options": {
                "cwd": "${workspaceFolder}",
                "env": { "PYTHONPATH": "${workspaceFolder}/src" }
            },
            "problemMatcher": [],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "dedicated",
                "showReuseMessage": false,
                "clear": true
            },
            "isBackground": true,
            "group": { "kind": "build", "isDefault": true }
        },
        {
            "label": "üß™ Yonca: Run Tests",
            "type": "shell",
            "command": "pytest",
            "args": ["tests/", "-v", "--tb=short"],
            "options": {
                "cwd": "${workspaceFolder}",
                "env": { "PYTHONPATH": "${workspaceFolder}/src" }
            },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" },
            "group": "test"
        },
        {
            "label": "üîç Yonca: Lint & Format Check",
            "type": "shell",
            "command": "ruff",
            "args": ["check", "src/", "tests/"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        // ================================================
        // üóÑÔ∏è Database Management
        // ================================================
        {
            "label": "üóÑÔ∏è Database: Run Migrations",
            "detail": "Apply pending Alembic migrations",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\alembic.exe",
            "args": ["upgrade", "head"],
            "options": {
                "cwd": "${workspaceFolder}",
                "env": { "PYTHONPATH": "${workspaceFolder}/src" }
            },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üóÑÔ∏è Database: Seed Synthetic Data",
            "detail": "Populate database with 5 synthetic farmer profiles",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
            "args": ["scripts/seed_database.py"],
            "options": {
                "cwd": "${workspaceFolder}",
                "env": { "PYTHONPATH": "${workspaceFolder}/src" }
            },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üóÑÔ∏è Database: Reset & Seed",
            "detail": "Drop all tables and reseed with fresh data",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
            "args": ["scripts/seed_database.py", "--reset"],
            "options": {
                "cwd": "${workspaceFolder}",
                "env": { "PYTHONPATH": "${workspaceFolder}/src" }
            },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üóÑÔ∏è Database: Create Migration",
            "detail": "Generate new Alembic migration from model changes",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\alembic.exe",
            "args": ["revision", "--autogenerate", "-m", "${input:migrationMessage}"],
            "options": {
                "cwd": "${workspaceFolder}",
                "env": { "PYTHONPATH": "${workspaceFolder}/src" }
            },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        // ================================================
        // üöÄ Compound Tasks (Workflows)
        // ================================================
        {
            "label": "üöÄ Dev: Start Everything",
            "detail": "Start Docker services + local API server",
            "dependsOn": [
                "üê≥ Docker: Start (Ollama + Redis only)",
                "üåø Yonca API: Start Development Server"
            ],
            "dependsOrder": "sequence",
            "problemMatcher": []
        },
        {
            "label": "üõë Dev: Stop Everything",
            "detail": "Stop Docker containers",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "down"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        // ================================================
        // üñ•Ô∏è Demo UI (Chainlit)
        // ================================================
        {
            "label": "üñ•Ô∏è Demo UI: Start Local (Python)",
            "detail": "Run Chainlit demo locally with hot reload (Direct LangGraph mode)",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\chainlit.exe",
            "args": ["run", "app.py", "-w", "--port", "8501"],
            "options": {
                "cwd": "${workspaceFolder}/demo-ui",
                "env": { 
                    "PYTHONPATH": "${workspaceFolder}/src;${workspaceFolder}/demo-ui",
                    "INTEGRATION_MODE": "direct",
                    "LLM_PROVIDER": "ollama",
                    "OLLAMA_BASE_URL": "http://localhost:11434",
                    "REDIS_URL": "redis://localhost:6379/0"
                }
            },
            "problemMatcher": [],
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "showReuseMessage": false,
                "clear": true
            },
            "isBackground": true
        },
        {
            "label": "üñ•Ô∏è Demo UI: Start API Bridge Mode",
            "detail": "Run Chainlit via FastAPI (Production Pattern - like mobile app)",
            "type": "shell",
            "command": "${workspaceFolder}\\.venv\\Scripts\\chainlit.exe",
            "args": ["run", "app.py", "-w", "--port", "8501"],
            "options": {
                "cwd": "${workspaceFolder}/demo-ui",
                "env": { 
                    "PYTHONPATH": "${workspaceFolder}/src;${workspaceFolder}/demo-ui",
                    "INTEGRATION_MODE": "api",
                    "YONCA_API_URL": "http://localhost:8000",
                    "REDIS_URL": "redis://localhost:6379/0"
                }
            },
            "problemMatcher": [],
            "presentation": {
                "reveal": "always",
                "panel": "dedicated",
                "showReuseMessage": false,
                "clear": true
            },
            "isBackground": true
        },
        {
            "label": "üñ•Ô∏è Demo UI: Start Docker",
            "detail": "Run Chainlit demo in Docker container",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "--profile", "demo", "up", "-d", "demo-ui"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üñ•Ô∏è Demo UI: Stop Docker",
            "detail": "Stop Demo UI container",
            "type": "shell",
            "command": "docker-compose",
            "args": ["-f", "docker-compose.local.yml", "--profile", "demo", "stop", "demo-ui"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "presentation": { "reveal": "always", "panel": "shared" }
        },
        {
            "label": "üñ•Ô∏è Demo UI: View Logs",
            "detail": "Follow demo-ui container logs",
            "type": "shell",
            "command": "docker",
            "args": ["logs", "-f", "yonca-demo-ui"],
            "options": { "cwd": "${workspaceFolder}" },
            "problemMatcher": [],
            "isBackground": true,
            "presentation": { "reveal": "always", "panel": "dedicated" }
        },
        {
            "label": "üöÄ Dev: Full Stack with Demo UI",
            "detail": "Start Docker + API + Demo UI (Direct mode)",
            "dependsOn": [
                "üê≥ Docker: Start (Ollama + Redis only)",
                "üåø Yonca API: Start Development Server",
                "üñ•Ô∏è Demo UI: Start Local (Python)"
            ],
            "dependsOrder": "sequence",
            "problemMatcher": []
        },
        {
            "label": "üèÜ Demo: Gold Standard (API Bridge)",
            "detail": "Full 3-tier architecture: Chainlit ‚Üí FastAPI ‚Üí LangGraph",
            "dependsOn": [
                "üê≥ Docker: Start (Ollama + Redis only)",
                "üåø Yonca API: Start Development Server",
                "üñ•Ô∏è Demo UI: Start API Bridge Mode"
            ],
            "dependsOrder": "sequence",
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "migrationMessage",
            "type": "promptString",
            "description": "Enter migration message (e.g., 'Add user settings table')"
        }
    ]
}
